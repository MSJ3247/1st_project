<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>리뷰 게시판 - VertScreen</title>
  <link rel="stylesheet" href="./VertScreen_mainStyle.css">
  <link rel="stylesheet" href="./header.css">
  <style>
    main {
      max-width: 1000px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    h2 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 20px;
      font-weight: bold;
    }

    /* 리뷰 목록 */
    .review-list {
      background: var(--panel);
      padding: 20px;
      border-radius: var(--radius);
      margin-bottom: 20px;
    }

    .review-item {
      background: #1e293b;
      padding: 15px;
      border-radius: var(--radius);
      margin-bottom: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .review-item:hover {
      background: rgba(29, 161, 242, 0.2);
    }

    /* 페이지네이션 */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin: 20px 0;
    }

    .page-btn {
      padding: 8px 14px;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: var(--panel);
      color: var(--text);
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .page-btn:hover {
      background: var(--accent);
      color: #000;
      transform: translateY(-2px);
    }

    .page-btn:active {
      transform: translateY(0);
      background: var(--accent-2);
      color: #000;
    }

    /* 검색바 */
    .search-bar {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }

    .search-bar input {
      width: 50%;
      padding: 10px;
      border-radius: var(--radius);
      border: 1px solid var(--line);
      background: #1a2235;
      color: #fff;
    }

    /* 리뷰 작성 버튼
    .write-review {
      margin-top: 20px;
      text-align: right;
    }
    .write-review button {
      background: var(--accent);
      color: #000;
      padding: 10px 20px;
      border: none;
      border-radius: var(--radius);
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .write-review button:hover {
      background: var(--accent-2);
    } */

    /* 프로필 드롭다운 */
    .profile {
      position: relative;
      display: none;
      align-items: center;
      cursor: pointer;
    }

    .avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      color: #000;
    }

    .dropdown {
      display: none;
      position: absolute;
      top: 48px;
      right: 0;
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      overflow: hidden;
      min-width: 140px;
      box-shadow: var(--shadow);
    }

    .dropdown a,
    .dropdown button {
      display: block;
      width: 100%;
      padding: 12px;
      background: none;
      border: none;
      color: var(--text);
      text-align: left;
      cursor: pointer;
      font-size: 14px;
    }

    .dropdown a:hover,
    .dropdown button:hover {
      background: #22314b;
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="nav-wrap">
      <div class="brand">
        <a href="./vertscreen_main.html">
          <img src="./VertScreen_logo.png" alt="VertScreen Logo">
        </a>
      </div>
      <nav class="nav">
        <a href="./vertscreen_advertlist.html">광고 종류</a>
        <a href="./vertscreen_brand.html">브랜드 가치</a>
        <a href="./party-make01.html">파티 모집</a>
        <a href="./listTest.html">광고 제안</a>
        <a href="review.html">리뷰 게시판</a>
      </nav>
      <div class="spacer"></div>
      <div class="actions" id="authArea">
        <a href="login.html" class="btn">로그인</a>
        <a href="login.html?mode=signup" class="btn primary">회원가입</a>
      </div>
      <div class="profile" id="profile">
        <div class="avatar" id="avatar">U</div>
        <div class="dropdown" id="dropdown">
          <div style="padding:12px;color:var(--muted)" id="welcomeMsg">사용자님 환영합니다!</div>
          <a href="myPage.html">마이페이지</a>
          <button onclick="logout()">로그아웃</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <h2>리뷰 게시판</h2>

    <!-- 리뷰 목록 -->
    <div class="review-list" id="reviewList"></div>

    <!-- 페이지네이션 -->
    <div class="pagination">
      <button class="page-btn">&lt;</button>
      <button class="page-btn">1</button>
      <button class="page-btn">2</button>
      <button class="page-btn">3</button>
      <button class="page-btn">&gt;</button>
    </div>

    <!-- 검색바 -->
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="리뷰 내용 또는 파티명을 검색하세요">
    </div>

    <!-- 리뷰 작성 버튼
    <div class="write-review">
      <button onclick="alert('리뷰 작성 페이지로 이동합니다.');">리뷰하기</button>
    </div> -->
  </main>

  <footer>
    <p><strong>Project A P M</strong></p>
    <p>대표자 채희수</p>
    <p>이메일 dooly123@naver.com</p>
    <p>연락처 010 1234 5678</p>
  </footer>

  <script>
    const reviewListElement = document.getElementById('reviewList');
    const searchInput = document.getElementById('searchInput');

    // 프로필 및 인증 처리
    const profile = document.getElementById("profile");
    const dropdown = document.getElementById("dropdown");
    const authArea = document.getElementById("authArea");

    profile.addEventListener("click", () => {
      dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    });

    function logout() {
      localStorage.removeItem("currentUser");
      location.reload();
    }

    window.onload = () => {
      const currentUser = localStorage.getItem("currentUser");
      if (currentUser) {
        authArea.style.display = "none";
        profile.style.display = "flex";
        document.getElementById("avatar").innerText = currentUser.charAt(0).toUpperCase();
        document.getElementById("welcomeMsg").innerText = currentUser + "님 환영합니다!";
      }

      // ✅ 보호할 링크들 (로그인 필요)
      const protectedLinks = [
        document.querySelector('a[href="./party-make01.html"]'),
        document.querySelector('a[href="#"]'), // 광고 제안 (실제 페이지 연결 시 수정)
      ];

      protectedLinks.forEach(link => {
        if (link) {
          link.addEventListener("click", (e) => {
            if (!currentUser) {
              e.preventDefault(); // 기본 이동 막기
              alert("로그인이 필요합니다.");
              window.location.href = "login.html"; // 로그인 페이지로 이동
            }
          });
        }
      });
    };

    window.addEventListener("click", (e) => {
      if (!profile.contains(e.target)) {
        dropdown.style.display = "none";
      }
    });

    // 참여중인 파티 목록 불러오기
    const parties = JSON.parse(localStorage.getItem('userParties')) || [
      { name: '파티 1 - 강남역 광고팀' },
      { name: '파티 2 - 홍대입구 광고팀' },
      { name: '파티 3 - 홍대입구 광고팀' },
      { name: '파티 4 - 홍대입구 광고팀' },
    ];

    // 리뷰 목록 렌더링
    function renderReviews(filter = '') {
      reviewListElement.innerHTML = '';
      parties
        .filter(party => party.name.toLowerCase().includes(filter.toLowerCase()))
        .forEach(party => {
          const div = document.createElement('div');
          div.className = 'review-item';
          div.textContent = party.name;
          div.onclick = () => {
            // 로그인 여부와 상관없이 상세 페이지로 이동
            window.location.href = `review_detail.html?party=${encodeURIComponent(party.name)}`;
          };
          reviewListElement.appendChild(div);
        });
    }

    // 검색 이벤트
    searchInput.addEventListener('input', () => {
      renderReviews(searchInput.value);
    });

    // 초기 표시
    renderReviews();
  </script>
</body>

</html>



